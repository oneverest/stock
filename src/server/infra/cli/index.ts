import program from 'commander';
import { createPovUseCase } from 'modules/pov/useCases/createPov';
import { CreatePovDTO } from 'modules/pov/useCases/createPov/createPovDTO';

require('dotenv').config();

async function run(arg: string, arg2: any) {
  console.log(arg, arg2);
  const datas = [
    ['2019-03-22', 1.0, 0],
    ['2019-03-23', 0.7015, 56.665],
    ['2019-03-25', 0.9468, 107.072],
    ['2019-03-26', 0.9116, 109.715],
    ['2019-03-27', 0.9076, 109.715],
    ['2019-03-28', 0.8981, 109.715],
    ['2019-03-29', 0.9218, 109.715],
    ['2019-04-01', 0.9766, 106.969],
    ['2019-04-02', 0.9837, 106.934],
    ['2019-04-03', 1.0003, 74.778],
    ['2019-04-04', 1.0168, 74.603],
    ['2019-04-08', 1.0136, 74.304],
    ['2019-04-09', 1.0091, 106.841],
    ['2019-04-10', 1.0105, 86.945],
    ['2019-04-11', 0.9906, 106.984],
    ['2019-04-12', 0.992, 106.983],
    ['2019-04-15', 0.9856, 106.983],
    ['2019-04-16', 0.9983, 93.041],
    ['2019-04-17', 0.995, 88.837],
    ['2019-04-18', 0.9969, 106.89],
    ['2019-04-19', 0.9961, 106.858],
    ['2019-04-22', 1.011, 106.84],
    ['2019-04-23', 0.9813, 106.299],
    ['2019-04-24', 0.9712, 106.299],
    ['2019-04-25', 0.9406, 106.299],
    ['2019-04-26', 0.9327, 115.318],
    ['2019-04-29', 0.916, 115.318],
    ['2019-04-30', 0.9266, 115.089],
    ['2019-05-06', 0.8705, 115.089],
    ['2019-05-07', 0.8778, 115.089],
    ['2019-05-08', 0.8747, 115.089],
    ['2019-05-09', 0.8684, 115.089],
    ['2019-05-10', 0.8943, 115.089],
    ['2019-05-13', 0.8851, 115.089],
    ['2019-05-14', 0.8808, 115.089],
    ['2019-05-15', 0.8907, 115.089],
    ['2019-05-16', 0.9046, 115.089],
    ['2019-05-17', 0.9046, 115.089],
    ['2019-05-18', 0.8884, 115.089],
    ['2019-05-20', 0.8872, 115.089],
    ['2019-05-21', 0.8951, 115.089],
    ['2019-05-22', 0.8923, 115.089],
    ['2019-05-23', 0.8862, 115.028],
    ['2019-05-24', 0.8775, 115.028],
    ['2019-05-27', 0.8921, 115.028],
    ['2019-05-28', 0.8904, 115.028],
    ['2019-05-29', 0.8877, 115.028],
    ['2019-05-30', 0.8862, 115.028],
    ['2019-05-31', 0.8903, 115.028],
    ['2019-06-03', 0.8855, 115.028],
    ['2019-06-04', 0.873, 115.028],
    ['2019-06-05', 0.8741, 115.028],
    ['2019-06-06', 0.8659, 115.028],
    ['2019-06-10', 0.8721, 115.028],
    ['2019-06-11', 0.8731, 115.028],
    ['2019-06-12', 0.8704, 115.028],
    ['2019-06-13', 0.8735, 115.028],
    ['2019-06-14', 0.8645, 115.028],
    ['2019-06-17', 0.8528, 115.996],
    ['2019-06-18', 0.855, 115.996],
    ['2019-06-19', 0.8634, 115.996],
    ['2019-06-20', 0.8791, 115.996],
    ['2019-06-21', 0.8861, 115.995],
    ['2019-06-24', 0.8874, 115.995],
    ['2019-06-25', 0.9022, 114.224],
    ['2019-06-26', 0.9188, 114.224],
    ['2019-06-27', 0.8977, 115.087],
    ['2019-06-28', 0.8956, 115.087],
    ['2019-07-01', 0.9046, 115.087],
    ['2019-07-02', 0.8999, 115.087],
    ['2019-07-03', 0.8938, 115.087],
    ['2019-07-04', 0.8917, 115.087],
    ['2019-07-05', 0.8971, 115.087],
    ['2019-07-08', 0.9193, 115.087],
    ['2019-07-09', 0.9193, 115.087],
    ['2019-07-10', 0.8957, 115.087],
    ['2019-07-11', 0.893, 115.087],
    ['2019-07-12', 0.8916, 115.087],
    ['2019-07-15', 0.9097, 114.796],
    ['2019-07-16', 0.9157, 114.796],
    ['2019-07-17', 0.9105, 114.796],
    ['2019-07-18', 0.904, 114.796],
    ['2019-07-19', 0.9161, 114.796],
    ['2019-07-22', 0.9033, 114.796],
    ['2019-07-23', 0.9115, 114.796],
    ['2019-07-24', 0.9271, 114.796],
    ['2019-07-25', 0.9353, 114.796],
    ['2019-07-26', 0.9428, 114.796],
    ['2019-07-29', 0.9452, 114.796],
    ['2019-07-30', 0.9577, 114.796],
    ['2019-07-31', 0.9598, 114.796],
    ['2019-08-01', 0.9574, 107.272],
    ['2019-08-02', 0.9351, 108.714],
    ['2019-08-05', 0.9191, 124.256],
    ['2019-08-06', 0.9151, 125.243],
    ['2019-08-07', 0.898, 126.252],
    ['2019-08-08', 0.9061, 126.252],
    ['2019-08-09', 0.9027, 126.252],
    ['2019-08-12', 0.919, 125.244],
    ['2019-08-13', 0.9227, 125.244],
    ['2019-08-14', 0.9265, 125.244],
    ['2019-08-15', 0.9196, 125.244],
    ['2019-08-16', 0.9215, 125.244],
    ['2019-08-19', 0.9521, 123.855],
    ['2019-08-20', 0.9559, 123.855],
    ['2019-08-21', 0.9975, 122.482],
    ['2019-08-22', 0.9934, 100.843],
    ['2019-08-23', 0.979, 121.804],
    ['2019-08-26', 0.984, 122.71],
    ['2019-08-27', 1.0033, 122.61],
    ['2019-08-28', 0.9966, 122.58],
    ['2019-08-29', 0.9981, 122.58],
    ['2019-08-30', 1.0133, 122.58],
    ['2019-09-02', 1.0224, 122.58],
    ['2019-09-03', 1.0127, 122.436],
    ['2019-09-04', 1.0146, 122.436],
    ['2019-09-05', 1.0153, 122.436],
    ['2019-09-06', 1.0123, 122.436],
    ['2019-09-09', 1.0245, 122.436],
    ['2019-09-10', 1.0319, 122.436],
    ['2019-09-11', 1.0248, 122.436],
    ['2019-09-16', 1.0521, 122.436],
    ['2019-09-17', 1.0159, 122.436],
    ['2019-09-18', 1.0109, 122.436],
    ['2019-09-23', 0.998, 122.436],
    ['2019-09-25', 0.9764, 123.879],
    ['2019-09-26', 0.9513, 123.879],
    ['2019-10-09', 0.9608, 123.879],
    ['2019-10-10', 0.9698, 123.879],
    ['2019-10-11', 0.983, 123.445],
    ['2019-10-12', 0.9802, 121.786],
    ['2019-10-14', 1.0054, 125.019],
    ['2019-10-15', 1.0063, 125.019],
    ['2019-10-16', 0.9924, 124.935],
    ['2019-10-17', 0.981, 102.165],
    ['2019-10-18', 0.968, 102.165],
    ['2019-10-21', 0.9617, 102.165],
    ['2019-10-22', 0.9761, 102.165],
    ['2019-10-23', 0.9666, 102.165],
    ['2019-10-24', 0.9684, 102.165],
    ['2019-10-25', 0.9741, 102.165],
    ['2019-10-28', 0.9827, 102.165],
    ['2019-10-29', 0.9758, 102.165],
    ['2019-10-30', 0.9614, 102.165],
    ['2019-10-31', 0.9546, 102.165],
    ['2019-11-01', 0.9568, 102.133],
    ['2019-11-04', 0.9625, 102.133],
    ['2019-11-05', 0.9707, 102.133],
    ['2019-11-06', 0.974, 102.133],
    ['2019-11-07', 0.9569, 102.133],
    ['2019-11-08', 0.961, 102.133],
    ['2019-11-10', 0.9505, 102.133],
    ['2019-11-11', 0.9489, 102.133],
    ['2019-11-13', 0.9461, 102.133],
    ['2019-11-14', 0.9494, 102.133],
    ['2019-11-15', 0.9489, 102.133],
    ['2019-11-18', 0.9525, 102.119],
    ['2019-11-19', 0.9591, 102.119],
    ['2019-11-20', 0.9626, 101.831],
    ['2019-11-21', 0.9632, 101.831],
    ['2019-11-22', 0.9591, 101.831],
    ['2019-11-25', 0.9672, 101.831],
    ['2019-11-26', 0.9698, 106.131],
    ['2019-11-27', 0.9649, 99.276],
    ['2019-11-28', 0.95, 114.512],
    ['2019-11-29', 0.952, 114.512],
    ['2019-12-02', 0.9567, 103.095],
    ['2019-12-03', 0.9567, 114.478],
    ['2019-12-04', 0.9557, 114.478],
    ['2019-12-05', 0.9621, 114.504],
    ['2019-12-06', 0.9689, 112.785],
    ['2019-12-09', 0.9696, 112.785],
    ['2019-12-10', 0.9689, 112.785],
    ['2019-12-11', 0.9711, 112.785],
    ['2019-12-12', 0.967, 112.785],
    ['2019-12-13', 0.9771, 112.785],
    ['2019-12-16', 0.9818, 112.785],
    ['2019-12-17', 0.9949, 90.13],
    ['2019-12-18', 0.9906, 116.545],
    ['2019-12-19', 0.9913, 116.545],
    ['2019-12-20', 0.9866, 116.545],
    ['2019-12-23', 0.9765, 112.797],
    ['2019-12-24', 0.9813, 112.797],
    ['2019-12-25', 0.981, 112.678],
    ['2019-12-26', 0.9838, 112.678],
    ['2019-12-27', 0.9858, 112.678],
    ['2019-12-30', 0.9924, 112.678],
    ['2019-12-31', 0.9978, 112.678],
    ['2020-01-02', 1.0095, 89.756],
    ['2020-01-03', 1.0168, 105.999],
    ['2020-01-04', 1.0168, 58.583],
    ['2020-01-06', 1.0236, 62.274],
    ['2020-01-07', 1.0314, 107.414],
    ['2020-01-08', 1.0283, 99.89],
    ['2020-01-09', 1.0284, 117.731],
    ['2020-01-10', 1.0243, 117.731],
    ['2020-01-13', 1.0317, 117.731],
    ['2020-01-14', 1.0254, 117.877],
    ['2020-01-15', 1.0103, 112.555],
    ['2020-01-16', 1.0128, 110.82],
    ['2020-01-17', 1.0117, 113.399],
    ['2020-01-20', 1.0163, 113.399],
    ['2020-01-21', 1.0015, 113.399],
    ['2020-01-22', 0.9945, 113.399],
    ['2020-01-23', 0.9759, 111.918],
    ['2020-01-24', 0.9759, 111.918],
    ['2020-02-03', 0.9313, 90.291],
    ['2020-02-04', 0.923, 90.291],
    ['2020-02-05', 0.9289, 97.631],
    ['2020-02-06', 0.9431, 97.631],
    ['2020-02-07', 0.9337, 89.601],
    ['2020-02-10', 0.9413, 87.209],
    ['2020-02-11', 0.9481, 107.621],
    ['2020-02-12', 0.9548, 107.621],
    ['2020-02-13', 0.9451, 107.621],
    ['2020-02-14', 0.9465, 76.493],
    ['2020-02-17', 0.973, 76.391],
    ['2020-02-18', 0.9802, 76.39],
    ['2020-02-19', 0.9733, 76.39],
    ['2020-02-20', 0.9844, 76.39],
    ['2020-02-21', 0.9837, 76.39],
    ['2020-02-24', 0.9756, 76.39],
    ['2020-02-25', 0.9709, 99.959],
    ['2020-02-26', 0.9746, 103.282],
    ['2020-02-27', 0.9698, 103.282],
    ['2020-02-28', 0.9436, 103.282],
    ['2020-03-02', 0.9694, 103.282],
    ['2020-03-03', 0.9745, 103.343],
    ['2020-03-04', 0.9778, 75.538],
    ['2020-03-05', 0.9882, 103.956],
    ['2020-03-06', 0.9874, 103.956],
    ['2020-03-09', 0.9908, 103.952],
    ['2020-03-10', 0.989, 103.891],
    ['2020-03-11', 0.9883, 87.598],
    ['2020-03-12', 0.9693, 103.569],
    ['2020-03-13', 0.9539, 106.016],
    ['2020-03-16', 0.9501, 105.453],
    ['2020-03-17', 0.9489, 105.561],
    ['2020-03-18', 0.936, 102.115],
    ['2020-03-19', 0.9237, 104.827],
    ['2020-03-20', 0.9405, 95.832],
    ['2020-03-21', 0.9405, 95.832],
  ];

  const dto = {} as CreatePovDTO;
  let counter = 0;
  console.log(`Total ${datas.length} rows`);
  for (const data of datas) {
    dto.net_worth = Number(data[1]);
    dto.position_ratio = Number(data[2]) / 100;
    dto.record_date = String(data[0]);
    dto.szzs = 2000;
    const resultOrError = await createPovUseCase.execute(dto);
    if (resultOrError.isLeft()) {
      console.log(resultOrError.value);
    } else {
      console.log(`插入成功 ${++counter}`);
    }
  }
  return;
}
async function main() {
  program
    .version('0.1.0')
    .command('import <file>')
    .action(run);

  await program.parseAsync(process.argv);
}

main();
